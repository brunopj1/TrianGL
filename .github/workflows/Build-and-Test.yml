name: Build and Test

on:
  push:
    branches:
      - '**'

permissions:
  contents: read

jobs:
  run:
    runs-on: windows-latest

    steps:

      # Checkout code
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          submodules: recursive

      # Setup CMake
      - name: Setup CMake
        uses: lukka/get-cmake@v3.31.3
          
      # Setup Ninja
      - name: Setup Ninja
        uses: seanmiddleditch/gha-setup-ninja@master

      # Build project
      - name: Configure and Build (Debug)
        run: |
          cmake -DCMAKE_BUILD_TYPE=Debug -G Ninja -S . -B cmake-build-debug
          cd cmake-build-debug
          cmake --build build